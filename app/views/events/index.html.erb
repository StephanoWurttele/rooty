<div class="title-background">
  <h1 class="bungee-font-title"><strong>Events</strong></h1>
</div>
<div class="container justify-content-center">
  <div>
    <h2 class="events-title"> Today's runs' </h2>
  </div>
  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <% @today_events.each do |event| %>
        <div class="carousel-item <%= 'active' if event == @today_events.first %>">
          <a href="/events/<%= event.id %>">
            <card class="d-block w-100">
              <div class="card-event-lg">
                <% if event.photo.attached? %>
                  <%= cl_image_tag(event.photo.key, width: 480, height: 300, crop: :fill) %>
                <% else %>
                  <%= image_tag "test_6.jpg", width: 400, height: 300 %>
                <% end %>
                <% if event == @today_events.first %>
                <% end %>
                <div class="card-event-lg-info">
                  <h2><%= event.title %></h2>
                  <p> <i class="fas fa-map-marker-alt"></i> <%= event.route.nodes.first.address %> </p>
                  <p> Distance: <%= event.route.distance %>m</p>
                  <p> <i class="fas fa-user-plus mb-2"></i> <%= event.users.count  %></p>
                  <div class="inline-avatar-lg-events div-size-events-show">
                    <% event.users.each do |user| %>
                      <% if user.photo.attached? %>
                        <%= cl_image_tag(user.photo.key, crop: :fill, style:"height: 30px; width: 30px; margin-top:0 !important; margin-left: 5px; ") %>
                      <% else %>
                        <%= image_tag("pp.png", crop: :fill, style:"height: 30px; width: 30px; margin-top:0 !important; margin-left: 5px; ") %>
                      <% end %>
                    <% end %>
                  </div>
                  <%# if event == @today_events.first %>
                  <%# end %>
                </div>
              </div>
            </card>
          </a>
        </div>
      <% end %>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

  <h2 class="events-title"> Coming up this week..</h2>
  </br>

  <div class="container">
    <% @next_events.each do |event| %>
      <a href="/events/<%= event.id %>">
        <div class="event-new-version">
          <div class="card-image">
            <% if event.photo.attached? %>
              <%= cl_image_tag(event.photo.key, width: 400, height: 300, crop: :fill) %>
            <% else %>
              <%= image_tag "test_6.jpg", width: 400, height: 300 %>
            <% end %>
            <div class="card-event-info">
              <div class="card-content">
                <h2><%= event.title %></h2>
                <!-- double check if necessary -->
                <!-- <div class="inline-avatar-lg div-size-events-show">
                  <ul>
                    <% event.users.first(5).each do |user| %>
                        <li>
                          <% if user.photo.attached? %>
                            <%= cl_image_tag(user.photo.key, crop: :fill, style:"height: 30px; width: 30px; margin-top:0 !important; margin-left: 5px; margin-bottom: 5px; ") %>
                          <% else %>
                            <%= image_tag("pp.png", crop: :fill, style:"height: 30px; width: 30px; margin-top:0 !important; margin-left: 5px; margin-bottom: 5px; ") %>
                          <% end %>
                          </li>
                    <% end %>
                  </ul>
                </div> -->
                <p>When: <%= event.starttime.strftime("%B %d, %Y at %I:%M%p") %> </p>
                <p> Distance:  <%= event.route.distance %> meters </p>
              </div>
            </div>
        </div>
        </div>
      </a>
    <% end %>
  </div>
</div>
<div class="bottom-img-events" style="background: linear-gradient(white, rgb(255,255,255), transparent), url(<%= image_path('wireframe.png') %>);">
</div>
